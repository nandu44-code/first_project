{% extends 'accounts/base.html' %}
{% load static %}
<!-- Start Header/Navigation -->
{% block bootstraplink %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
    /* Custom CSS for vertical alignment */
    /*.vertical-align {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        height: 100vh;
    }*/
</style>

{% endblock %}

{% block content %}

<div class="container mt-5">
    
    <div class="row d-flex justify-content-center">
        <!-- Main Product Image -->
       
        <div class="col-sm-6 mx-auto vertical-align">
           
            <div class="col-md-6">
                <!-- Main Product Image -->
                <img src="/media/{{variant.image1}}" class="img-fluid" width="140%">
            </div>
            <!-- Small Images Container -->
            <div class="d-flex flex-row col-md-6 ">
                <!-- Small Images -->
                <div class="small-image mt-3 mb-5">
                    <img src="/media/{{variant.image2}}" alt="Small Image 1" class="img-fluid small-img"
                        style="width: 100%;">
                </div>
                <div class="small-image  mt-3 mb-2">
                    <img src="/media/{{variant.image3}}" alt="Small Image 2" class="img-fluid small-img"
                        style="width: 100%;">
                </div>
                <div class="small-image  mt-3 mb-2">
                    <img src="/media/{{variant.image4}}" alt="Small Image 3" class="img-fluid small-img"
                        style="width: 100%;">
                </div>
            </div>
        </div>
            <!-- Product Details -->
            <div class="col-sm-6 mb-5 ">

                <h2>{{variant.product.product_name}}</h2>

                <h4 class="text-bg-danger mb-3 !important"><strong>Rs.   {{variant.selling_price}}</strong></h4>
                {% if product.stock == 0 %}
                <button class="btn btn-danger-sm mb-3">Out of stock</button>
                <p class="sorry_msg">Sorry, for this inconvinence</p>
                {% else %}
                <h6>Stock Left: {{variant.stock}}</h6>
                {% endif %}
                <h5 class="mt-4">choose a color</h5>
                <div class="d-flex">
                    

                    {% for variants in available_vatiants %}

                    <div class="d-flex mr-5 mb-5 mt-1 ">
                        <button type="button" class="variant-button" data-variant-id="{{ variant.id }}" style=" background: {{variants.color}} ; margin-right: 5px; width: px; height:10px;">
                            {{variants.id}}
                        </button>   
                    </div>
                    {% endfor %}
                </div>
                

               
                <h5>About this Item :</h5>
                <p>{{variant.product.description}}</p>

                
                <!-- Buttons -->
                <div class="mt-3">
                    
                        <a href="{% url 'add_cart' product_id=variant.product.id %}">
                        <button class="btn btn-sm button-addtocart">Add to Cart</button>
                        </a>
                    <button class="btn btn-primary">Buy Now</button>
                </div>
            </div>

       
    </div>
</div>




{% endblock %}

{% block script %}
<script>
    $(document).ready(function () {
        // Attach a click event handler to all buttons with the 'variant-button' class
        $(".variant-button").click(function () {
            var variantId = $(this).data("variant-id"); 
            console.log(".......................................");
            // Get the 'data-variant-id' attribute
            // Make an AJAX request to send the variantId to the backend
            <!-- $.ajax({
                type: "POST", // You can change this to GET or any other method
                url: "/your-api-endpoint", // Replace with your actual backend endpoint
                data: { variant_id: variantId }, // Send the variantId as data
                success: function (response) {
                    // Handle the response from the backend (if needed)
                    console.log("Variant ID sent successfully.");
                },
                error: function () {
                    // Handle errors (if any)
                    console.log("Error sending Variant ID.");
                }
            }); -->
        });
    });
    </script>
    
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>


{% endblock %}